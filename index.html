<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>VisualHTML Builder</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      height: 100vh;
      background: #f7f9fc;
      color: #333;
    }

    .header {
      background: #2c3e50;
      color: white;
      padding: 15px 20px;
      text-align: center;
    }

    .container {
      display: flex;
      flex: 1;
      overflow: hidden;
    }

    .toolbar {
      width: 200px;
      background: #ecf0f1;
      padding: 15px;
      border-right: 1px solid #ddd;
      overflow-y: auto;
    }

    .tool {
      padding: 12px;
      margin: 8px 0;
      background: white;
      border: 1px solid #bdc3c7;
      border-radius: 6px;
      cursor: grab;
      text-align: center;
      user-select: none;
      transition: all 0.2s;
    }

    .tool:hover {
      background: #d5dbdb;
      transform: translateY(-2px);
    }

    .canvas {
      flex: 1;
      min-height: 100%;
      background: #f9f9f9;
      overflow: auto;
      padding: 20px;
      position: relative;
    }

    .canvas .element {
      padding: 10px;
      margin: 10px;
      border: 1px dashed #ccc;
      outline: none;
      cursor: move;
      transition: border 0.2s;
    }

    .canvas .element:focus {
      border: 1px solid #3498db;
      outline: none;
    }

    .inspector {
      width: 250px;
      background: #ecf0f1;
      padding: 15px;
      border-left: 1px solid #ddd;
      overflow-y: auto;
    }

    .inspector h3 {
      margin-bottom: 15px;
      color: #2c3e50;
    }

    .inspector label {
      display: block;
      margin: 10px 0 5px;
      font-weight: 500;
    }

    .inspector input, .inspector button {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #bdc3c7;
      border-radius: 4px;
    }

    .inspector button {
      background: #3498db;
      color: white;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
    }

    .inspector button:hover {
      background: #2980b9;
    }

    .footer {
      text-align: center;
      padding: 10px;
      background: #2c3e50;
      color: #ecf0f1;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <div class="header">
    <h1>üé® VisualHTML Builder</h1>
    <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤</p>
  </div>

  <div class="container">
    <div class="toolbar">
      <div class="tool" draggable="true" data-type="h1">–ó–∞–≥–æ–ª–æ–≤–æ–∫ H1</div>
      <div class="tool" draggable="true" data-type="h2">–ó–∞–≥–æ–ª–æ–≤–æ–∫ H2</div>
      <div class="tool" draggable="true" data-type="p">–ü–∞—Ä–∞–≥—Ä–∞—Ñ</div>
      <div class="tool" draggable="true" data-type="button">–ö–Ω–æ–ø–∫–∞</div>
      <div class="tool" draggable="true" data-type="img">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</div>
      <div class="tool" draggable="true" data-type="div">–ë–ª–æ–∫</div>
    </div>

    <div id="canvas" class="canvas"></div>

    <div class="inspector">
      <h3>–°–≤–æ–π—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–∞</h3>
      <label>–¢–µ–∫—Å—Ç:</label>
      <input type="text" id="text-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç">
      <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞:</label>
      <input type="color" id="color-input" value="#000000">
      <label>–§–æ–Ω:</label>
      <input type="color" id="bg-color-input" value="#ffffff">
      <label>–û—Ç—Å—Ç—É–ø (padding):</label>
      <input type="number" id="padding-input" value="10">
      <button id="export-btn">–≠–∫—Å–ø–æ—Ä—Ç HTML</button>
    </div>
  </div>

  <div class="footer">
    –ò–¥–µ—è –∏ –∞–≤—Ç–æ—Ä—Å–∫–æ–µ –ø—Ä–∞–≤–æ –¢–∏—Ö–æ–Ω –ú–µ—Ç–µ–ª–∫–∏–Ω (TihonV)
  </div>

  <script>
    // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
    document.querySelectorAll('.tool').forEach(tool => {
      tool.addEventListener('dragstart', (e) => {
        e.dataTransfer.setData('text/plain', tool.dataset.type);
      });
    });

    const canvas = document.getElementById('canvas');

    canvas.addEventListener('dragover', (e) => {
      e.preventDefault();
    });

    canvas.addEventListener('drop', (e) => {
      e.preventDefault();
      const type = e.dataTransfer.getData('text/plain');
      const element = createElement(type);
      canvas.appendChild(element);
      selectElement(element);
    });

    function createElement(type) {
      const el = document.createElement(type);
      el.classList.add('element');
      el.contentEditable = true;
      el.style.padding = '10px';
      el.style.margin = '10px';
      el.setAttribute('data-id', Date.now());

      if (type === 'img') {
        el.src = 'https://via.placeholder.com/150';
        el.alt = '–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ';
      } else if (type === 'button') {
        el.textContent = '–ö–Ω–æ–ø–∫–∞';
      } else if (type === 'h1') {
        el.textContent = '–ó–∞–≥–æ–ª–æ–≤–æ–∫ H1';
      } else if (type === 'h2') {
        el.textContent = '–ó–∞–≥–æ–ª–æ–≤–æ–∫ H2';
      } else if (type === 'p') {
        el.textContent = '–ü–∞—Ä–∞–≥—Ä–∞—Ñ';
      } else if (type === 'div') {
        el.textContent = '–ë–ª–æ–∫';
      }

      return el;
    }

    let selectedElement = null;

    function selectElement(el) {
      selectedElement = el;
      document.getElementById('text-input').value = el.textContent || el.src;
      document.getElementById('color-input').value = getComputedStyle(el).color;
      document.getElementById('bg-color-input').value = getComputedStyle(el).backgroundColor;
      document.getElementById('padding-input').value = parseInt(getComputedStyle(el).padding) || 10;

      // –ü—Ä–∏–≤—è–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π
      document.getElementById('text-input').oninput = () => {
        if (el.tagName === 'IMG') {
          el.alt = document.getElementById('text-input').value;
        } else {
          el.textContent = document.getElementById('text-input').value;
        }
      };

      document.getElementById('color-input').oninput = () => {
        el.style.color = document.getElementById('color-input').value;
      };

      document.getElementById('bg-color-input').oninput = () => {
        el.style.backgroundColor = document.getElementById('bg-color-input').value;
      };

      document.getElementById('padding-input').oninput = () => {
        el.style.padding = document.getElementById('padding-input').value + 'px';
      };
    }

    // –≠–∫—Å–ø–æ—Ä—Ç HTML
    document.getElementById('export-btn').addEventListener('click', () => {
      const htmlContent = canvas.innerHTML;
      const fullHTML = `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–æ–∑–¥–∞–Ω–æ –≤ VisualHTML Builder</title>
  <style>
    body { font-family: Arial, sans-serif; }
  </style>
</head>
<body>
  ${htmlContent}
</body>
</html>`;

      const blob = new Blob([fullHTML], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'index.html';
      a.click();
      URL.revokeObjectURL(url);
    });
  </script>

</body>
</html>
